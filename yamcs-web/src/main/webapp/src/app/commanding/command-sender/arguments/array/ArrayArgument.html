<label>
  {{ label }}
  <app-help *ngIf="description">
    {{ description }}
  </app-help>

  <app-errors #err [controlName]="name"></app-errors>

  <div class="meta" [class.error]="err.invalid$ | async">
    <div class="item">{{ engType$ | async }}</div>
  </div>

  <div class="entries" [formArrayName]="name">
    <ng-container *ngFor="let name of formArray.controls; index as i">
      <ng-container [ngSwitch]="type.elementType.engType">

        <app-aggregate-argument *ngSwitchCase="'aggregate'"
                                [name]="name"
                                [type]="type.elementType"
                                [index]="i"
                                [dimensions]="ownDimensions"
                                [initialValue]="entryInitialValues[i]">
        </app-aggregate-argument>

        <app-binary-argument *ngSwitchCase="'binary'"
                             [name]="name"
                             [type]="type.elementType"
                             [index]="i"
                             [dimensions]="ownDimensions"
                             [formControlName]="i">
        </app-binary-argument>

        <app-boolean-argument *ngSwitchCase="'boolean'"
                              [name]="name"
                              [type]="type.elementType"
                              [index]="i"
                              [dimensions]="ownDimensions"
                              [formControlName]="i">
        </app-boolean-argument>

        <app-enumeration-argument *ngSwitchCase="'enumeration'"
                                  [name]="name"
                                  [type]="type.elementType"
                                  [index]="i"
                                  [dimensions]="ownDimensions"
                                  [formControlName]="i">
        </app-enumeration-argument>

        <app-float-argument *ngSwitchCase="'float'"
                            [name]="name"
                            [type]="type.elementType"
                            [index]="i"
                            [dimensions]="ownDimensions"
                            [formControlName]="i">
        </app-float-argument>

        <app-integer-argument *ngSwitchCase="'integer'"
                              [name]="name"
                              [type]="type.elementType"
                              [index]="i"
                              [dimensions]="ownDimensions"
                              [formControlName]="i">
        </app-integer-argument>

        <app-string-argument *ngSwitchCase="'string'"
                             [name]="name"
                             [type]="type.elementType"
                             [index]="i"
                             [dimensions]="ownDimensions"
                             [formControlName]="i">
        </app-string-argument>

        <app-time-argument *ngSwitchCase="'time'"
                           [name]="name"
                           [type]="type.elementType"
                           [index]="i"
                           [dimensions]="ownDimensions"
                           [formControlName]="i">
        </app-time-argument>

        <app-array-argument *ngSwitchCase="type.elementType.engType.endsWith('[]') ? type.elementType.engType : ''"
                            [name]="i"
                            [type]="type.elementType"
                            [index]="i"
                            [dimensions]="ownDimensions"
                            [initialValue]="entryInitialValues[i]">
        </app-array-argument>
      </ng-container>

      <br>
    </ng-container>
  </div>
</label>
